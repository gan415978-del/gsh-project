<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Профиль - GSH</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <style>
      /* Возвращаем скругления первому посту */
      #posts-container .post-card:first-child {
        border-top-left-radius: 12px !important;
        border-top-right-radius: 12px !important;
        border-top: 1px solid transparent !important;
      }
      #posts-container .post-card:first-child:hover {
        border-color: #333 !important;
      }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="header-container">
        <a href="index.html" class="logo">GSH</a>
        <button
          class="btn-back-header"
          id="btn-back-header"
          style="display: none"
        >
          <i class="fa-solid fa-chevron-left"></i>
        </button>
        <div class="header-actions">
          <div class="search-wrapper" id="search-wrapper">
            <input
              type="text"
              class="search-input-dynamic"
              id="header-search-input"
              placeholder="Поиск..."
            />
            <button class="search-btn-icon" id="search-trigger">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </div>
          <div
            id="auth-container"
            style="display: flex; align-items: center; gap: 15px"
          ></div>
        </div>
      </div>
    </header>

    <div class="main-layout">
      <aside class="sidebar-left">
        <nav class="nav-menu">
          <a href="index.html" class="nav-item"
            ><i class="fa-solid fa-fire"></i> Популярное</a
          >
          <a href="fresh.html" class="nav-item"
            ><i class="fa-regular fa-clock"></i> Свежее</a
          >
          <a href="feed.html" class="nav-item"
            ><i class="fa-regular fa-bookmark"></i> Моя лента</a
          >
          <a href="messages.html" class="nav-item"
            ><i class="fa-regular fa-comments"></i> Сообщения</a
          >
          <a href="rating.html" class="nav-item"
            ><i class="fa-solid fa-chart-simple"></i> Рейтинг</a
          >
        </nav>
        <div class="nav-divider"></div>
        <div class="nav-topics">
          <div class="topics-header">
            Темы
            <span
              id="admin-add-topic-btn"
              style="
                float: right;
                cursor: pointer;
                display: none;
                color: #4683d9;
              "
              ><i class="fa-solid fa-plus"></i
            ></span>
          </div>
          <div id="topics-list-sidebar"></div>
        </div>
      </aside>

      <main class="content-feed">
        <div class="profile-cover" id="user-cover">
          <button class="edit-cover-btn" id="btn-edit-cover">
            <i class="fa-solid fa-pen"></i> Редактировать обложку
          </button>
        </div>

        <div class="edit-menu" id="menu-cover">
          <div class="edit-menu-item" id="action-change-cover">
            <i class="fa-regular fa-image"></i> Изменить
          </div>
          <div
            class="edit-menu-item"
            id="action-delete-cover"
            style="color: #ff5e5e"
          >
            <i class="fa-regular fa-trash-can"></i> Удалить
          </div>
        </div>

        <div class="profile-header-info">
          <div class="profile-avatar-container" id="avatar-container">
            <img
              src="https://placehold.co/120"
              class="profile-avatar-big"
              id="user-avatar"
            />
            <div class="avatar-overlay"><i class="fa-solid fa-camera"></i></div>
          </div>

          <div class="edit-menu" id="menu-avatar">
            <div class="edit-menu-item" id="action-view-avatar">
              <i class="fa-regular fa-eye"></i> Посмотреть
            </div>
            <div class="edit-menu-item" id="action-change-avatar">
              <i class="fa-solid fa-pen"></i> Изменить
            </div>
          </div>

          <div class="profile-actions">
            <button
              class="btn-publish"
              id="btn-subscribe"
              style="display: none"
            >
              Подписаться
            </button>

            <button
              class="btn-profile-square"
              id="btn-open-chat"
              style="display: none"
            >
              <i class="fa-regular fa-comment-dots"></i>
            </button>

            <div
              style="position: relative"
              id="settings-wrapper"
              style="display: none"
            >
              <button class="btn-profile-square" id="btn-profile-settings">
                <i class="fa-solid fa-gear"></i>
              </button>
              <div
                class="edit-menu"
                id="menu-settings"
                style="top: 45px; right: 0; width: 180px"
              >
                <div class="edit-menu-item" id="action-change-name">
                  <i class="fa-solid fa-pen"></i> Изменить имя
                </div>
              </div>
            </div>
          </div>

          <div class="profile-details">
            <div class="profile-name" id="user-name">Загрузка...</div>

            <div class="profile-meta-row">
              <div class="profile-stats" id="user-stats">+0 рейтинга</div>

              <span style="color: #444">|</span>

              <div style="color: #ccc; font-weight: 500">
                <span id="user-followers" style="color: #fff; font-weight: bold"
                  >0</span
                >
                подписчиков
              </div>

              <div style="color: #ccc; font-weight: 500">
                <span id="user-following" style="color: #fff; font-weight: bold"
                  >0</span
                >
                подписок
              </div>

              <span style="color: #444">|</span>

              <div class="profile-date" id="user-date">На сайте с ...</div>
            </div>

            <div class="profile-desc-wrapper">
              <div class="profile-desc" id="user-status">...</div>
              <i
                class="fa-solid fa-pen edit-status-btn"
                id="btn-edit-status"
                title="Изменить статус"
              ></i>
            </div>
          </div>
        </div>

        <div class="feed-header-merged">
          <div class="profile-tabs">
            <span class="profile-tab active" data-tab="posts"
              >Посты <span id="posts-count">0</span></span
            >
            <span class="profile-tab" data-tab="comments"
              >Комментарии <span id="comments-count">0</span></span
            >
          </div>
        </div>

        <div id="posts-container"></div>

        <div id="comments-container" style="display: none">
          <div class="comments-sort-header">
            <span class="sort-trigger">Отсортировать по:</span>
            <div class="comments-sort-menu">
              <div class="sort-option active" data-sort="new">Новые</div>
              <div class="sort-option" data-sort="old">Старые</div>
            </div>
          </div>
          <div id="user-comments-list"></div>
        </div>
      </main>
      <aside class="sidebar-right">
        <div
          style="
            background: #191919;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
          "
        >
          <div>
            <i
              class="fa-regular fa-images"
              style="font-size: 24px; color: #333; margin-bottom: 10px"
            ></i>
            <div style="color: #666; font-size: 13px">
              Здесь будет галерея скриншотов
            </div>
          </div>
        </div>

        <div class="footer-links">
          <a href="#">О проекте</a>
          <a href="#">Правила</a>
          <div class="copyright">© GSH 2025</div>
        </div>
      </aside>
    </div>

    <input
      type="file"
      id="input-upload-cover"
      accept="image/*"
      style="display: none"
    />
    <input
      type="file"
      id="input-upload-avatar"
      accept="image/*"
      style="display: none"
    />

    <div id="avatar-viewer" class="image-viewer-overlay">
      <img src="" id="viewer-img" class="image-viewer-content" />
    </div>

    <div id="topic-modal" class="modal-overlay">
      <div class="modal-window">
        <button class="modal-close"><i class="fa-solid fa-xmark"></i></button>
        <h2 class="auth-title" id="topic-modal-title">Настройки темы</h2>
        <div class="input-group">
          <input
            type="text"
            id="topic-name-input"
            placeholder="Название"
            required
          />
        </div>
        <div class="input-group">
          <input
            type="text"
            id="topic-desc-input"
            placeholder="Описание"
            required
          />
        </div>
        <div
          style="
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <button
            class="btn-action"
            id="btn-save-topic"
            style="width: auto; padding: 10px 20px"
          >
            Сохранить
          </button>
          <button
            id="btn-admin-delete-topic"
            style="
              background: transparent;
              border: none;
              color: #ff5e5e;
              cursor: pointer;
              font-size: 14px;
            "
          >
            Удалить тему
          </button>
        </div>
      </div>
    </div>

    <div id="auth-modal" class="modal-overlay">
      <div class="modal-window">
        <button class="modal-close"><i class="fa-solid fa-xmark"></i></button>

        <div class="auth-screen active" id="screen-start">
          <div class="auth-logo">GSH</div>
          <h2 class="auth-title">Вход в аккаунт</h2>
          <div class="auth-buttons">
            <button class="btn-social">
              <i class="fa-brands fa-google"></i> Google
            </button>
            <button class="btn-social" id="btn-to-email">
              <i class="fa-regular fa-envelope"></i> Почта
            </button>
          </div>
          <div class="auth-footer-link">
            Нет аккаунта? <span id="link-to-reg">Регистрация</span>
          </div>
        </div>

        <form class="auth-screen" id="screen-login">
          <button
            type="button"
            class="btn-back"
            onclick="document.getElementById('screen-login').classList.remove('active'); document.getElementById('screen-start').classList.add('active');"
          >
            <i class="fa-solid fa-chevron-left"></i>
          </button>

          <h2 class="auth-title">Вход</h2>
          <div class="input-group">
            <input type="email" id="login-email" placeholder="Email" required />
          </div>
          <div class="input-group">
            <input
              type="password"
              id="login-password"
              placeholder="Пароль"
              required
            />
          </div>
          <button type="submit" class="btn-action">Войти</button>
          <div class="form-message" id="msg-login"></div>
        </form>

        <form class="auth-screen" id="screen-register">
          <button
            type="button"
            class="btn-back"
            onclick="document.getElementById('screen-register').classList.remove('active'); document.getElementById('screen-start').classList.add('active');"
          >
            <i class="fa-solid fa-chevron-left"></i>
          </button>

          <h2 class="auth-title">Регистрация</h2>
          <div class="input-group">
            <input
              type="text"
              id="reg-name"
              placeholder="Имя пользователя"
              required
            />
          </div>
          <div class="input-group">
            <input type="email" id="reg-email" placeholder="Email" required />
          </div>
          <div class="input-group">
            <input
              type="password"
              id="reg-password"
              placeholder="Пароль"
              required
            />
          </div>
          <button type="submit" class="btn-action">Создать аккаунт</button>
          <div class="form-message" id="msg-register"></div>
        </form>
      </div>
    </div>
    <div id="post-editor-modal" class="modal-overlay">
      <div class="editor-window">
        <div class="editor-header">
          <div class="editor-user-info">
            <div class="editor-meta">
              <div class="editor-author" id="editor-user-name">User</div>

              <div class="editor-topic-selector" id="topic-trigger">
                <span id="selected-topic-name">Без темы</span>
                <i class="fa-solid fa-chevron-down"></i>
              </div>

              <div class="topic-dropdown" id="topic-dropdown">
                <div class="topic-option" data-id="1">Скриншоты</div>
                <div class="topic-option" data-id="2">Гайды</div>
                <div class="topic-option" data-id="3">Фоторежим</div>
                <div class="topic-option" data-id="4">Железо</div>
              </div>
            </div>
          </div>
          <button class="icon-btn close-editor">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <div class="editor-body">
          <input
            type="text"
            class="editor-title-input"
            id="post-title"
            placeholder="Заголовок"
          />

          <div class="editor-image-section">
            <input
              type="file"
              id="file-input"
              accept="image/*"
              multiple
              style="display: none"
            />
            <div
              id="images-preview-container"
              class="images-preview-grid"
            ></div>
            <div id="upload-placeholder" class="upload-placeholder">
              <i class="fa-regular fa-image"></i>
              <span>Загрузить до 15 скриншотов</span>
              <div style="font-size: 12px; color: #888; margin-top: 5px">
                <span id="images-counter">0/15</span>
              </div>
            </div>
          </div>

          <textarea
            class="editor-content-input"
            id="post-content"
            placeholder="Комментарий..."
          ></textarea>
        </div>

        <div class="editor-footer">
          <div class="editor-footer-left">
            <button class="btn-publish" id="btn-publish-post">
              Опубликовать
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="chat-modal" class="modal-overlay">
      <div class="editor-window" style="height: 500px">
        <div class="editor-header">
          <div class="editor-author" id="chat-partner-name"></div>
          <button class="icon-btn close-chat">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="chat-body" id="chat-messages-area"></div>
        <div class="editor-footer">
          <div class="chat-input-wrapper">
            <input
              type="text"
              class="chat-input-field"
              id="chat-input"
              placeholder="Сообщение..."
            /><button class="btn-send" id="btn-send-message">
              <i class="fa-regular fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="post-viewer-modal" class="post-viewer-modal">
      <div class="viewer-content">
        <div class="viewer-main">
          <div class="viewer-post-header">
            <div class="viewer-post-author">
              <a
                href="#"
                id="viewer-author-avatar-link"
                style="text-decoration: none"
              >
                <img
                  src=""
                  id="viewer-author-avatar"
                  style="
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    object-fit: cover;
                    cursor: pointer;
                  "
                />
              </a>
              <div style="flex: 1">
                <div style="display: flex; align-items: center; gap: 15px">
                  <a
                    href="#"
                    id="viewer-author-name-link"
                    style="text-decoration: none"
                  >
                    <div
                      id="viewer-author-name"
                      style="font-weight: 700; color: #fff; cursor: pointer"
                    >
                      Имя
                    </div>
                  </a>
                  <span style="color: #555">•</span>
                  <div
                    id="viewer-post-date"
                    style="font-size: 13px; color: #888"
                  >
                    Дата
                  </div>
                </div>
                <a
                  href="#"
                  id="viewer-post-category-link"
                  style="text-decoration: none"
                >
                  <div
                    id="viewer-post-category"
                    style="
                      font-size: 13px;
                      color: #888;
                      cursor: pointer;
                      margin-top: 2px;
                    "
                  >
                    Тема
                  </div>
                </a>
              </div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px">
              <div style="position: relative">
                <button
                  class="viewer-menu-btn"
                  id="viewer-post-menu-btn"
                  style="display: none"
                >
                  <i class="fa-solid fa-ellipsis"></i>
                </button>
                <div class="viewer-post-menu" id="viewer-post-menu">
                  <div class="viewer-menu-item" id="viewer-edit-post">
                    <i class="fa-solid fa-pen"></i> Редактировать
                  </div>
                  <div class="viewer-menu-item danger" id="viewer-delete-post">
                    <i class="fa-solid fa-trash"></i> Удалить
                  </div>
                </div>
              </div>
              <button class="viewer-close-btn" id="btn-close-viewer">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>
          </div>

          <div class="viewer-post-title-section">
            <h2 id="viewer-post-title">Заголовок</h2>
          </div>

          <div class="viewer-image-container" id="viewer-post-image-box"></div>

          <div class="viewer-post-text">
            <div id="viewer-post-content">Текст поста...</div>
          </div>
        </div>

        <div class="viewer-sidebar">
          <div class="viewer-comments-header">
            <span>Комментарии</span>
            <div class="viewer-header-actions">
              <button
                class="viewer-action-btn-mini action-like"
                id="viewer-like-btn"
                data-id="0"
              >
                <i class="fa-regular fa-heart"></i>
                <span id="viewer-likes-count">0</span>
              </button>
              <button
                class="viewer-action-btn-mini action-bookmark"
                id="viewer-bookmark-btn"
                data-id="0"
              >
                <i class="fa-regular fa-bookmark"></i>
                <span id="viewer-bookmarks-count">0</span>
              </button>
              <div class="viewer-action-btn-mini disabled">
                <i class="fa-regular fa-eye"></i>
                <span id="viewer-views-count">0</span>
              </div>
            </div>
          </div>
          <div class="viewer-comments-list" id="viewer-comments-list"></div>
          <div class="viewer-footer">
            <div class="viewer-input-wrapper">
              <input
                type="text"
                class="viewer-input"
                id="viewer-comment-input"
                placeholder="Написать комментарий..."
              />
              <button class="btn-send" id="btn-send-comment">Отправить</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Модальное окно удаления поста -->
    <div id="delete-modal" class="modal-overlay">
      <div class="modal-window" style="max-width: 360px">
        <h3 class="modal-title">Удаление</h3>
        <p class="modal-text">
          Вы уверены, что хотите удалить этот пост? Это действие нельзя
          отменить.
        </p>
        <div class="modal-actions">
          <button class="btn-modal btn-cancel" id="btn-cancel-delete">
            Отмена
          </button>
          <button class="btn-modal btn-danger" id="btn-confirm-delete">
            Удалить
          </button>
        </div>
      </div>
    </div>

    <!-- Модальное окно удаления комментария -->
    <div id="delete-comment-modal" class="modal-overlay">
      <div class="modal-window-modern">
        <h3 class="modal-title-modern">Удаление</h3>
        <p class="modal-text-modern">Подтвердите действие</p>
        <div class="modal-actions-modern">
          <button
            class="btn-modal-modern btn-cancel-modern"
            id="btn-cancel-delete-comment"
          >
            Отмена
          </button>
          <button
            class="btn-modal-modern btn-danger-modern"
            id="btn-confirm-delete-comment"
          >
            Удалить
          </button>
        </div>
      </div>
    </div>

    <div id="name-change-modal" class="modal-overlay">
      <div class="modal-window" style="max-width: 400px">
        <button class="modal-close"><i class="fa-solid fa-xmark"></i></button>
        <h3 class="auth-title">Изменить имя</h3>
        <div class="input-group">
          <input
            type="text"
            id="input-new-name"
            placeholder="Новое имя"
            required
          />
        </div>
        <button class="btn-action" id="btn-save-name" style="margin-top: 15px">
          Сохранить
        </button>
      </div>
    </div>

    <!-- Полноэкранный просмотр изображений -->
    <div id="fullscreen-viewer" class="fullscreen-viewer">
      <button class="fullscreen-close" id="fullscreen-close-btn">
        <i class="fa-solid fa-xmark"></i>
      </button>
      <div class="fullscreen-nav fullscreen-nav-left" id="fullscreen-prev">
        <i class="fa-solid fa-chevron-left"></i>
      </div>
      <div class="fullscreen-image-container">
        <img id="fullscreen-image" src="" alt="Fullscreen view" />
        <div class="fullscreen-counter" id="fullscreen-counter">1 / 1</div>
      </div>
      <div class="fullscreen-nav fullscreen-nav-right" id="fullscreen-next">
        <i class="fa-solid fa-chevron-right"></i>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
